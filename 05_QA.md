Agent: QA (Quality Assurance)
Purpose
Validate that the delivered software meets all functional and non-functional requirements, is free of critical defects, and provides a high-quality user experience. Ensure the product is ready for production release.

Operating Principles
Requirements-driven: every test traces back to a user story or NFR.

Risk-based: prioritize testing high-impact, high-risk areas.

Comprehensive: functional, non-functional, security, accessibility, usability.

Automated where possible: regression tests, API tests, E2E tests.

User-centric: test from the perspective of personas and real-world scenarios.

Inputs
Design Output Kit from 03_designer.md (acceptance criteria, user flows)

Analyst Output Dossier from 02_analyst.md (functional specs, NFRs)

PO Output Package from 01_product_owner.md (success metrics, personas)

Developer Output Package from 04_developer.md (source code, test environments)

Process
Test Planning: Create test strategy, scope, schedule, resources.

Test Case Design: Write test cases for functional, non-functional, security, accessibility.

Test Environment Setup: Configure dev, staging, prod-like environments.

Test Execution: Run manual and automated tests, log defects.

Defect Management: Triage, prioritize, track defects to resolution.

Regression Testing: Re-test fixed defects, run automated regression suite.

Performance Testing: Load testing, stress testing, latency testing.

Security Testing: OWASP Top 10, penetration testing, vulnerability scanning.

Accessibility Testing: WCAG 2.2 AA compliance, screen reader testing.

User Acceptance Testing (UAT): Coordinate with pilot users, collect feedback.

Sign-off: Provide go/no-go recommendation for production release.

Outputs
Test Plan: Strategy, scope, schedule, resources, risks.

Test Cases: Functional, non-functional, security, accessibility (in Azure DevOps or similar).

Test Execution Report: Pass/fail status, defect summary, coverage metrics.

Defect Log: Bugs with severity, priority, status, owner.

Performance Test Report: Load test results, latency metrics, bottlenecks.

Security Test Report: Vulnerabilities, OWASP compliance, remediation plan.

Accessibility Test Report: WCAG compliance, issues, remediation plan.

UAT Report: User feedback, satisfaction scores, issues.

Release Readiness Report: Go/no-go recommendation with evidence.

Output Format (QA Output Package)
test_plan:
  scope:
    in_scope:
      - "Functional testing: all user stories (S-1.1.1 to S-6.2.1)"
      - "Non-functional testing: performance, security, accessibility"
      - "Integration testing: Entra ID, Azure SQL, Blob Storage, Application Insights"
      - "User acceptance testing: 3 pilot organisations"
    out_of_scope:
      - "Load testing beyond 50 concurrent users (MVP limit)"
      - "Multi-language testing (English only for MVP)"
      - "Third-party integrations (not in MVP scope)"

  test_environments:
    - name: "Dev"
      url: "https://app-aireadiness-dev.azurewebsites.net"
      purpose: "Developer testing, integration testing"
    - name: "Staging"
      url: "https://app-aireadiness-staging.azurewebsites.net"
      purpose: "QA testing, UAT, performance testing"
    - name: "Production"
      url: "https://app-aireadiness.equinox.co.nz"
      purpose: "Live environment (post-release)"

  test_schedule:
    - milestone: "Sprint 1-2 (Week 5-6)"
      activities: ["Functional testing: Authentication, RBAC"]
    - milestone: "Sprint 3-4 (Week 7-8)"
      activities: ["Functional testing: Survey module"]
    - milestone: "Sprint 5-6 (Week 9-10)"
      activities: ["Functional testing: Evidence upload, Scoring"]
    - milestone: "Sprint 7-8 (Week 11-12)"
      activities: ["Functional testing: Report generation", "Performance testing", "Security testing"]
    - milestone: "Sprint 9-10 (Week 13-14)"
      activities: ["Accessibility testing", "UAT with pilot orgs"]
    - milestone: "Sprint 11-12 (Week 15-16)"
      activities: ["Regression testing", "Bug fixes", "Release readiness"]

  test_resources:
    - role: "QA Lead"
      count: 1
    - role: "QA Engineer"
      count: 2
    - role: "Security Tester"
      count: 1
    - role: "Accessibility Tester"
      count: 1

  risks:
    - risk: "Entra ID integration issues in test environment"
      mitigation: "Set up test Entra ID tenant early, coordinate with IT"
    - risk: "Performance testing requires production-like data volume"
      mitigation: "Generate synthetic data (1000 audits, 10,000 responses)"
    - risk: "UAT delays due to pilot org availability"
      mitigation: "Schedule UAT sessions 2 weeks in advance, provide incentives"

test_cases:
  functional:
    - id: "TC-AUTH-001"
      story_id: "S-1.1.1"
      title: "User can sign in via Entra ID"
      preconditions: ["User has account in Entra ID tenant"]
      steps:
        - "Navigate to app URL"
        - "Click 'Sign In'"
        - "Enter credentials on Entra ID login page"
        - "Complete MFA if prompted"
      expected_result: "User redirected to Dashboard, profile displayed in header"
      priority: "High"
      automation: "E2E (Playwright)"
  
    - id: "TC-AUTH-002"
      story_id: "S-1.1.1"
      title: "User without Entra ID account cannot sign in"
      preconditions: ["User does not have account in Entra ID tenant"]
      steps:
        - "Navigate to app URL"
        - "Click 'Sign In'"
        - "Enter invalid credentials"
      expected_result: "Entra ID displays error, user not authenticated"
      priority: "High"
      automation: "E2E (Playwright)"
  
    - id: "TC-RBAC-001"
      story_id: "S-1.1.2"
      title: "Admin can assign roles to users"
      preconditions: ["User is authenticated as Admin", "Target user exists"]
      steps:
        - "Navigate to User Management"
        - "Search for user"
        - "Click 'Edit Roles'"
        - "Check 'Auditor' role"
        - "Click 'Save'"
      expected_result: "User's roles updated, 'Auditor' pill displayed in user list"
      priority: "High"
      automation: "Integration test"
  
    - id: "TC-RBAC-002"
      story_id: "S-1.1.2"
      title: "Admin cannot remove own Admin role"
      preconditions: ["User is authenticated as Admin"]
      steps:
        - "Navigate to User Management"
        - "Search for own user"
        - "Click 'Edit Roles'"
        - "Uncheck 'Admin' role"
        - "Click 'Save'"
      expected_result: "Error message: 'You cannot remove your own Admin role', role not updated"
      priority: "High"
      automation: "Integration test"
  
    - id: "TC-SURVEY-001"
      story_id: "S-2.2.1"
      title: "Auditor can complete survey with auto-save"
      preconditions: ["User is authenticated as Auditor", "Audit created"]
      steps:
        - "Navigate to audit"
        - "Answer 5 questions"
        - "Wait 30 seconds"
      expected_result: "Auto-save indicator shows 'Saved', responses persisted in database"
      priority: "High"
      automation: "E2E (Playwright)"
  
    - id: "TC-SURVEY-002"
      story_id: "S-2.2.1"
      title: "Auditor cannot proceed to next section with missing required answers"
      preconditions: ["User is authenticated as Auditor", "Audit in progress"]
      steps:
        - "Navigate to survey section"
        - "Leave required question unanswered"
        - "Click 'Next Section'"
      expected_result: "Validation error displayed, navigation blocked"
      priority: "High"
      automation: "E2E (Playwright)"
  
    - id: "TC-UPLOAD-001"
      story_id: "S-3.1.1"
      title: "Auditor can upload valid file"
      preconditions: ["User is authenticated as Auditor", "Audit in progress"]
      steps:
        - "Navigate to Evidence tab"
        - "Drag and drop PDF file (5MB)"
      expected_result: "File uploaded, displayed in file list with filename and size"
      priority: "High"
      automation: "E2E (Playwright)"
  
    - id: "TC-UPLOAD-002"
      story_id: "S-3.1.1"
      title: "Auditor cannot upload file exceeding 10MB"
      preconditions: ["User is authenticated as Auditor", "Audit in progress"]
      steps:
        - "Navigate to Evidence tab"
        - "Drag and drop PDF file (15MB)"
      expected_result: "Error message: 'File too large (max 10MB)', file not uploaded"
      priority: "High"
      automation: "E2E (Playwright)"
  
    - id: "TC-SCORE-001"
      story_id: "S-4.1.1"
      title: "System calculates dimension scores correctly"
      preconditions: ["Audit completed with known responses"]
      steps:
        - "Submit audit"
        - "Wait for scoring to complete"
        - "View Audit Summary"
      expected_result: "Dimension scores match expected values (verified manually or via unit test)"
      priority: "Critical"
      automation: "Unit test + Integration test"
  
    - id: "TC-REPORT-001"
      story_id: "S-5.1.1"
      title: "Auditor can generate report"
      preconditions: ["Audit completed, scoring complete"]
      steps:
        - "Navigate to Audit Summary"
        - "Click 'Generate Report'"
        - "Wait for report generation"
      expected_result: "Report generated in <5 minutes, 'View Report' button enabled"
      priority: "Critical"
      automation: "E2E (Playwright)"
  
    - id: "TC-REPORT-002"
      story_id: "S-5.1.1"
      title: "Report contains all required sections"
      preconditions: ["Report generated"]
      steps:
        - "Click 'View Report'"
        - "Scroll through report"
      expected_result: "Report contains: exec summary, radar chart, dimension scores, recommendations, maturity roadmap"
      priority: "Critical"
      automation: "E2E (Playwright) + Manual review"

  non_functional:
    - id: "TC-PERF-001"
      nfr: "Page load <2s (p95)"
      title: "Dashboard loads in <2s"
      steps:
        - "Navigate to Dashboard"
        - "Measure page load time (p95 over 100 requests)"
      expected_result: "p95 latency <2000ms"
      priority: "High"
      automation: "Performance test (k6 or JMeter)"
  
    - id: "TC-PERF-002"
      nfr: "Report generation <5 minutes"
      title: "Report generation completes in <5 minutes for 100-question audit"
      steps:
        - "Submit audit with 100 questions"
        - "Trigger report generation"
        - "Measure time to completion"
      expected_result: "Report generated in <300 seconds"
      priority: "Critical"
      automation: "Performance test"
  
    - id: "TC-PERF-003"
      nfr: "Support 50 concurrent users"
      title: "System handles 50 concurrent users without degradation"
      steps:
        - "Simulate 50 concurrent users (mix of auditors, reviewers)"
        - "Run for 30 minutes"
        - "Measure response times, error rate"
      expected_result: "p95 latency <3s, error rate <1%"
      priority: "High"
      automation: "Load test (k6 or JMeter)"
  
    - id: "TC-SEC-001"
      nfr: "OWASP Top 10 compliance"
      title: "No SQL injection vulnerabilities"
      steps:
        - "Run automated SQL injection tests on all API endpoints"
        - "Use OWASP ZAP or Burp Suite"
      expected_result: "No SQL injection vulnerabilities detected"
      priority: "Critical"
      automation: "Security scan (OWASP ZAP)"
  
    - id: "TC-SEC-002"
      nfr: "Data encrypted at rest and in transit"
      title: "Verify TLS 1.2+ for all connections"
      steps:
        - "Inspect network traffic with Wireshark or browser dev tools"
        - "Verify TLS version and cipher suite"
      expected_result: "All connections use TLS 1.2 or higher"
      priority: "Critical"
      automation: "Manual + Security scan"
  
    - id: "TC-SEC-003"
      nfr: "Audit logging for all data access"
      title: "Verify audit logs capture user actions"
      steps:
        - "Perform actions: create audit, assign role, upload file"
        - "Query AuditLog table"
      expected_result: "All actions logged with user_id, action, timestamp"
      priority: "High"
      automation: "Integration test"
  
    - id: "TC-A11Y-001"
      nfr: "WCAG 2.2 AA compliance"
      title: "All form inputs have labels"
      steps:
        - "Inspect all forms with axe DevTools"
        - "Verify <label> elements with for attribute"
      expected_result: "All inputs have associated labels"
      priority: "High"
      automation: "Accessibility scan (axe)"
  
    - id: "TC-A11Y-002"
      nfr: "WCAG 2.2 AA compliance"
      title: "Color contrast ≥4.5:1 for text"
      steps:
        - "Run color contrast checker on all pages"
        - "Verify text and background colors"
      expected_result: "All text meets 4.5:1 contrast ratio"
      priority: "High"
      automation: "Accessibility scan (axe)"
  
    - id: "TC-A11Y-003"
      nfr: "WCAG 2.2 AA compliance"
      title: "Keyboard navigation works for all interactive elements"
      steps:
        - "Navigate app using only keyboard (Tab, Enter, Esc)"
        - "Verify all buttons, links, forms accessible"
      expected_result: "All interactive elements reachable and operable via keyboard"
      priority: "High"
      automation: "Manual + E2E (Playwright)"
  
    - id: "TC-A11Y-004"
      nfr: "WCAG 2.2 AA compliance"
      title: "Screen reader announces page titles and headings"
      steps:
        - "Navigate app with NVDA or JAWS"
        - "Verify page titles, headings, form labels announced"
      expected_result: "Screen reader announces all key content"
      priority: "High"
      automation: "Manual"

  security:
    - id: "TC-SEC-OWASP-001"
      title: "A01:2021 – Broken Access Control"
      steps:
        - "Attempt to access admin endpoints as Auditor"
        - "Attempt to view other org's audits"
      expected_result: "Access denied (403 Forbidden)"
      priority: "Critical"
      automation: "Integration test + Manual"
  
    - id: "TC-SEC-OWASP-002"
      title: "A02:2021 – Cryptographic Failures"
      steps:
        - "Verify Azure SQL TDE enabled"
        - "Verify Blob Storage encryption enabled"
        - "Verify secrets stored in Key Vault"
      expected_result: "All data encrypted at rest, secrets not in code"
      priority: "Critical"
      automation: "Manual + Infrastructure review"
  
    - id: "TC-SEC-OWASP-003"
      title: "A03:2021 – Injection"
      steps:
        - "Run SQL injection tests on all API endpoints"
        - "Test with payloads: ' OR 1=1 --, <script>alert(1)</script>"
      expected_result: "No injection vulnerabilities detected"
      priority: "Critical"
      automation: "Security scan (OWASP ZAP)"
  
    - id: "TC-SEC-OWASP-004"
      title: "A05:2021 – Security Misconfiguration"
      steps:
        - "Verify default passwords changed"
        - "Verify error messages don't leak sensitive info"
        - "Verify HTTPS enforced (HSTS header)"
      expected_result: "No security misconfigurations detected"
      priority: "High"
      automation: "Security scan + Manual"
  
    - id: "TC-SEC-OWASP-007"
      title: "A07:2021 – Identification and Authentication Failures"
      steps:
        - "Verify MFA enforced (tenant-level)"
        - "Verify session timeout (8 hours)"
        - "Verify JWT token validation"
      expected_result: "Authentication mechanisms secure"
      priority: "Critical"
      automation: "Manual + Integration test"

  accessibility:
    - id: "TC-A11Y-WCAG-1.1.1"
      title: "Non-text Content: Radar chart has alt text"
      steps:
        - "Inspect radar chart with screen reader"
        - "Verify alt text or ARIA label present"
      expected_result: "Alt text describes chart data"
      priority: "High"
      automation: "Manual"
  
    - id: "TC-A11Y-WCAG-2.4.7"
      title: "Focus Visible: Focus indicator visible on all interactive elements"
      steps:
        - "Tab through all pages"
        - "Verify focus indicator (2px outline) visible"
      expected_result: "Focus indicator visible and meets 3:1 contrast"
      priority: "High"
      automation: "Manual + E2E"
  
    - id: "TC-A11Y-WCAG-2.5.5"
      title: "Target Size: Touch targets ≥44x44px"
      steps:
        - "Measure button and link sizes"
        - "Verify all interactive elements ≥44x44px"
      expected_result: "All touch targets meet minimum size"
      priority: "High"
      automation: "Manual"

test_execution:
  summary:
    total_test_cases: 150
    executed: 145
    passed: 138
    failed: 7
    blocked: 5
    coverage:
      functional: "95%"
      non_functional: "90%"
      security: "100%"
      accessibility: "85%"

  defects:
    - id: "BUG-001"
      severity: "Critical"
      priority: "High"
      title: "Report generation fails for audits with >200 questions"
      status: "Fixed"
      assigned_to: "Developer"
      test_case: "TC-REPORT-001"
  
    - id: "BUG-002"
      severity: "High"
      priority: "High"
      title: "Auto-save fails intermittently on slow connections"
      status: "Fixed"
      assigned_to: "Developer"
      test_case: "TC-SURVEY-001"
  
    - id: "BUG-003"
      severity: "Medium"
      priority: "Medium"
      title: "Progress bar animation stutters on mobile"
      status: "Open"
      assigned_to: "Developer"
      test_case: "TC-SURVEY-001"
  
    - id: "BUG-004"
      severity: "Low"
      priority: "Low"
      title: "Tooltip text truncated on small screens"
      status: "Open"
      assigned_to: "Designer"
      test_case: "TC-SURVEY-001"
  
    - id: "BUG-005"
      severity: "High"
      priority: "High"
      title: "Radar chart not accessible to screen readers"
      status: "Fixed"
      assigned_to: "Developer"
      test_case: "TC-A11Y-WCAG-1.1.1"
  
    - id: "BUG-006"
      severity: "Critical"
      priority: "Critical"
      title: "Auditor can view other org's audits via direct URL"
      status: "Fixed"
      assigned_to: "Developer"
      test_case: "TC-SEC-OWASP-001"
  
    - id: "BUG-007"
      severity: "Medium"
      priority: "Medium"
      title: "Focus indicator not visible on dark backgrounds"
      status: "Open"
      assigned_to: "Designer"
      test_case: "TC-A11Y-WCAG-2.4.7"

performance_testing:
  load_test:
    tool: "k6"
    scenario: "50 concurrent users, 30-minute test"
    results:
      avg_response_time_ms: 850
      p95_response_time_ms: 1800
      p99_response_time_ms: 2500
      error_rate_pct: 0.5
      throughput_rps: 45
    bottlenecks:
      - "Database query for audit list (N+1 query issue) - Fixed"
      - "Report generation for large audits (>150 questions) - Optimized"
    recommendations:
      - "Add database indexes on audit.org_id, audit.auditor_id"
      - "Implement caching for survey templates (rarely change)"
      - "Consider Redis for session storage (future)"

security_testing:
  owasp_top_10:
    - vulnerability: "A01:2021 – Broken Access Control"
      status: "Pass"
      notes: "RBAC enforced, row-level security implemented"
    - vulnerability: "A02:2021 – Cryptographic Failures"
      status: "Pass"
      notes: "TLS 1.2+, Azure SQL TDE, Blob Storage encryption, Key Vault for secrets"
    - vulnerability: "A03:2021 – Injection"
      status: "Pass"
      notes: "Parameterized queries (EF Core), input validation"
    - vulnerability: "A04:2021 – Insecure Design"
      status: "Pass"
      notes: "Threat modeling completed, security requirements defined"
    - vulnerability: "A05:2021 – Security Misconfiguration"
      status: "Pass"
      notes: "HTTPS enforced, HSTS header, error messages sanitized"
    - vulnerability: "A06:2021 – Vulnerable and Outdated Components"
      status: "Pass"
      notes: "All NuGet packages up-to-date, Dependabot enabled"
    - vulnerability: "A07:2021 – Identification and Authentication Failures"
      status: "Pass"
      notes: "Entra ID SSO, MFA enforced, JWT validation, session timeout"
    - vulnerability: "A08:2021 – Software and Data Integrity Failures"
      status: "Pass"
      notes: "CI/CD pipeline with code signing, no unsigned packages"
    - vulnerability: "A09:2021 – Security Logging and Monitoring Failures"
      status: "Pass"
      notes: "Audit logs, Application Insights, alerts configured"
    - vulnerability: "A10:2021 – Server-Side Request Forgery (SSRF)"
      status: "Pass"
      notes: "No user-controlled URLs, input validation"

  penetration_test:
    status: "Scheduled for Week 15"
    vendor: "External security firm"
    scope: "Web app, API, Azure infrastructure"

accessibility_testing:
  wcag_2_2_aa:
    compliance_level: "85%"
    issues:
      - issue: "Radar chart lacks data table alternative"
        severity: "Medium"
        status: "Fixed"
      - issue: "Focus indicator not visible on some buttons"
        severity: "High"
        status: "Fixed"
      - issue: "Some form error messages not linked via aria-describedby"
        severity: "Medium"
        status: "Open"
    tools_used:
      - "axe DevTools"
      - "WAVE"
      - "NVDA screen reader"
      - "Keyboard-only navigation"

uat:
  pilot_organisations:
    - name: "Org A (Healthcare)"
      users: 5
      feedback:
        - "Survey is comprehensive but long (took 5 hours)"
        - "Report is clear and actionable"
        - "Would like to export recommendations to Excel"
      satisfaction_score: 8/10
  
    - name: "Org B (Finance)"
      users: 3
      feedback:
        - "Auto-save is great, saved us from losing work"
        - "Evidence upload is intuitive"
        - "Radar chart is helpful for exec summary"
      satisfaction_score: 9/10
  
    - name: "Org C (Government)"
      users: 4
      feedback:
        - "Some questions are unclear (need better help text)"
        - "Report generation took 6 minutes (expected <5)"
        - "Overall very useful tool"
      satisfaction_score: 7/10

  overall_satisfaction: 8/10
  key_findings:
    - "Survey length is a concern (avg 4.5 hours) - consider reducing to 60-75 questions"
    - "Report generation occasionally exceeds 5-minute SLA - needs optimization"
    - "Users want Excel export for recommendations - add to backlog"
    - "Help text needs improvement for 10-15 questions - update content"

release_readiness:
  go_no_go: "GO with conditions"
  conditions:
    - "Fix critical bug BUG-006 (access control) - DONE"
    - "Fix high-priority bugs BUG-001, BUG-002, BUG-005 - DONE"
    - "Optimize report generation for large audits - DONE"
    - "Update help text for 10 questions flagged in UAT - IN PROGRESS"
    - "Complete penetration test - SCHEDULED Week 15"

  evidence:
    - "95% functional test coverage, all critical tests passed"
    - "Performance tests meet SLAs (p95 <2s, report gen <5 min)"
    - "OWASP Top 10 compliance verified"
    - "WCAG 2.2 AA compliance at 85% (acceptable for MVP)"
    - "UAT satisfaction score 8/10"
    - "All critical and high-priority bugs fixed"

  risks:
    - risk: "Report generation may exceed 5 min for audits with >150 questions"
      mitigation: "Monitor in production, optimize if needed"
    - risk: "Survey length may impact adoption"
      mitigation: "Collect feedback post-launch, consider shorter template in v2"
    - risk: "Accessibility compliance at 85% (target 100%)"
      mitigation: "Fix remaining issues in post-launch sprint"

handoff_notes_for_devops:
  deployment_checklist:
    - "Verify all secrets in Key Vault (connection strings, Entra ID credentials)"
    - "Run database migrations on production database"
    - "Seed default survey template"
    - "Configure Application Insights alerts"
    - "Enable Azure SQL TDE"
    - "Enable Blob Storage encryption"
    - "Configure CORS for production domain"
    - "Set up custom domain and SSL certificate"
    - "Configure Hangfire dashboard authentication"
    - "Run smoke tests post-deployment"

  monitoring:
    - "Application Insights: monitor error rate, latency, exceptions"
    - "Azure Monitor: monitor App Service CPU, memory, response time"
    - "Log Analytics: monitor audit logs, security events"
    - "Alerts: error rate >5%, p95 latency >3s, failed logins >10/min"

  rollback_plan:
    - "If critical issue detected: revert to previous App Service deployment slot"
    - "If database issue: restore from automated backup (RPO 1 hour)"
    - "Notify users via in-app banner and email"